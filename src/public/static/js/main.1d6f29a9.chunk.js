(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{110:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAEBklEQVR4nO2aTWhcVRTHf+e8FFuoKCIoLixulOpCXQlduhDEQrJQV7q07lwIgkoSXl4qiNRoIm3ttCpaUWlBKZS6qHFlwVUo1o+mSq1fBVu0sVZtS989Lia0Tmfmvjcz792Zie+3S3Lvuf/zz7l35n5ARUXFZWZsDbGN9FtGSLThp7NEqhzTKYuJ7cY+aQqKNP0isQMCDwIXEPa4lC3E8kUftAWhyQCdticxXr+q0SGM2dT4iFguhZNXPk0G8ILdpCknuXp61DmJsdOt4jWel99KVxeAZgOAKLHPDe7z9DuPsNelvEQsX5akLQit/suYsC+j32qMx1U5EiX2WTRlj7DHohL0lU7LCmDa1qvxdYexjiPUXMpOYvm9d2lhaG0AoIkdBe7oIuY54D0Hc0zKV10rC0TLKbBM1jRox1pgk8IRSezgoE+PthXAZtugjkMFjfMdwi6XsoNYlgqKWQjtDYhNVfkFuLnA8f4E3nfCq0zINwXG7Zr2BgA6bTWMJ0oY1xl8qsZcOsl+RKyEMXLhNSCasodM2F+yhm8RtrqUN4jlXMljNeE1gDm7Rpc4DVwbQMtZ4AMnzDAhiwHGA7IMACSxvQIPhxCzTNDpkWlAlNhjBrvLFOHhGMI2t5pdPCN/lTFApgHEdr0qp4BVZQjIyR/A287xCrGcKDJwtgGAJDYvcH+RA3eJMzgQCbOXxpkvYnrkMkATewqY7XWwQhEOi7E9dbxLLH93HyYPsd2qyonc7cOyBLzjHC8Ty4+dds6dkCa2ANzb6QABuTI9JuSTvJ18m6FGss8I+o0KbHTGQU1sIUpsEzO2JqtT/pJO7G6Fwz1JDM8pjLdcxFbG5adWDTqa05rYceC2QqSF5SLCPoVaJ9OjoqJi5fO/WgSdMcukNBzz5b8Jju0ehi/5zI/B3AaoMFacrpIRFsTYka5lN0/LP76m+StAGaVvJ3e5SA0+7vSrcL41YLOtU8f3uduH5TTGm87Y1s1mKFcFqDHGoCVf0HY4lwFmjA5I9l3t+HzkORK7QZVf6WS9KJ76kZgyw7j8UGTgzKQiZaP1L/lFhO3LN85dl7mPzMQcwcu/8HM/H4N0MVLaya8PbwVEZ3jApPTkSz/79+E1wMr78jMEl6PlXI/X7//qZX60wLhd074CRtiAKyz5vt4A+2hrgDpGe4w9MGXuw/dIahG4vYuYA/cKxEfrCkjsLjpPvv4OaIQaz8mZnpUFoqUBKozlXP3NYF6NWrqeD3lU0kLVBaClAWKMZuTf8BZw6LL+D81rQGy3qPJzy78N6WtQH00VoNq897/8XH5Iy9xHkwF2ZfOzYl6E+2g04EW7Ti6yDuHZlVTmPhoNOM8FB3cSi+uTnoqKioqKiopw/Avgo4mc7CplEAAAAABJRU5ErkJggg=="},120:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABmJLR0QA/wD/AP+gvaeTAAAEWElEQVRoge2aTWhdRRTHf2du6sKmYi1GQxNEaW13WrQf7qwru1MqfsVIXdjEgh9IimDz0pvkRYWqCzeaVBCsRIOCIpTuFFe2GKvL1lYFtWAqVWmTgvTdOS7yqiRl7rsfM49XeL/tOXPm/+fdd2fm3IE2bdq0adO6SNDqsd4cGe5T2KqwUeA2YA3QWc+YB84p/CRwQpSjifIlsfweSpJ/w6/oGlOjT5R+Fe4uUkLgGxUO2YhpXpZzPuX5MxxrjxGGEJ4GrvVUdQE4aA2vMyxnfBQsb3hSV5iz7EGp8v+j6puLKAfsal7lOfmnTKFyhsd1g1FmgDtK1cmK8L1NeIRYfihawhQdGI3qTqPM0iyzAMqdxjAbjeqDRUsUMhyN6S4VPiLcI5zGKhU+NmM6WGRwbsNmXAcU3gM6ikzoiQh424zrs3kH5voPR6O6U4WZ+oStQCLCQ0lFPss6ILvhWNcZw7fAdUWUBWTeWjYTy4ksydke6VivMYZPaD2zAJ3GMM2krsiSnMmwMbxIM9/G+dlk5ng+S2Jjw1VdCwyXVXQZhcPW0GMtvQpHfNUF9jOh3Y2SGho2CXuBlV4kAWoZZFjOEMtvahjwVRfoNAlDjZLSX1qLB4Ff8Lc3xo7IkjnNmKqv2sCC7eCWtANH6i9savTh0WwTWGkSHk1LSDUsSr9fPeERy5NpcbfhCe1W4S7vigKjwmYm9CZX3Gk4SthO6I5IGCSqca8r6DSssDWInCagwjZXLM3wxjBywqOwwRVzGhZYF0ZOeATWu2JpR7zr80yicFgNA3l7T8vX5SuItUcMUwI7cpRd7QqkLUu5Dvf/7aB8U2xH5tReuMVztZJmeD5PITFMEWtPST1XUtVesUzlHHXBFUj7D/8F3JB1BoEdYviVsfStce69tM2qYAl/uwJpy9KPhaZqARROuWJpy1KmlkkrInDSFXMbVo6GkRMega9dMafhpIMvAJ9n1WahScRXrqD7Lb1P5gRmg0gKiCjH2CdzrnjqOqzCIf+SwtJIc6phGzHN4ifLq4UF28FMWkL6TmuxN3TQp6Ilm5Oq9nqtrbzT6AN64wN+Vdcay0k8dS4VjqhlNx2IWKYE7vdRF7hgLbc3ui6RqaNhxvUllNf86AqEMGQr8kajtEyHB9vFm8B3pUWFQjhuu3grS2q209KAXLKWh4HzZXQFYt7C4wzIpSzJ2Y+HsZwWZReQFBQWgkSEPiri3EouJ9d5ONkvnwrsya8rCCowmFTk8zyDcjcAkhGZEngKqOUd65EE4ZlkRN7NO7Bw3zka1wdUeR9YVbRGQc6L0J/3l71M2WtL6+vXljaVqpMV4Xj92tLpoiXK9bQqcspatiC8QEpbxQMXUUZtwj1lzILPTykT2m1q7EXYjb/vyQvApLUc8HXhNNTl0scEnlDYUmAOFeWYGj6wCR8Sy58+5YW+PtwVCdtV2Fa/PnwrcCNLrw//ofDzsuvDZ4PqatOmTZs2Lcq/uElHxvUFwYEAAAAASUVORK5CYII="},124:function(e,t,a){e.exports=a(234)},129:function(e,t,a){},214:function(e,t){},217:function(e,t,a){},234:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),i=a.n(c),s=(a(129),a(2)),o=a.n(s),u=a(5),l=a(38),p=Object(n.createContext)({}),h=p.Provider,m=function(){return Object(n.useContext)(p)},f=a(34),d=a(47),g=a(109),v=a(237),w=a(73),A=a(110),b=a.n(A);function j(e){var t=Object(n.useState)({txt:"",imgUrl:""}),a=Object(l.a)(t,2),c=a[0],i=a[1];function s(e){i(Object(g.a)({},c,Object(d.a)({},e.currentTarget.name,e.currentTarget.value)))}return r.a.createElement("div",null,r.a.createElement("div",{className:"flex form-container"},r.a.createElement(v.a,{size:"small",name:"txt",placeholder:e.topicAddMode?"Add a Topic":e.userName?"Send A Message":"Write Your Name",value:c.txt,onChange:s}),e.topicAddMode?r.a.createElement(v.a,{size:"small",name:"imgUrl",placeholder:"Img Url",value:c.imgUrl,onChange:s}):"",r.a.createElement(w.a,{size:"small",className:"btn",type:"link",onClick:function(){if(c.txt)return e.topicAddMode?e.sendMsg(c):!e.userName&&e.setUserName?(e.setUserName(c.txt),e.sendMsg({userName:"",txt:"".concat(c.txt," has joined the chat"),_id:Date.now()})):e.sendMsg({userName:e.userName,txt:c.txt,_id:Date.now()}),i({txt:"",imgUrl:""})}},r.a.createElement("img",{src:b.a,alt:"send"}))))}var E=a(235);function O(e){var t=e.chat,a=t.topic,n=t._id,c=t.imgUrl,i=e.setCurrTopic,s=e.currTopicId;return r.a.createElement("div",{onClick:function(){return i(n)},className:"flex pointer topic-container ".concat(s===n?"active-topic":"")},r.a.createElement(E.a,{size:"large",src:c}),r.a.createElement("h4",{className:"center-self"},a))}function N(e){var t=m().chatList;function a(a){e.topicAddMode&&e.toggleTopicAddMode(),t.setCurrChat(a)}return Object(n.useEffect)((function(){t.getChats()}),[t]),Object(f.a)((function(){return r.a.createElement("div",{className:"overflow-y"},t.chats.map((function(e){return r.a.createElement(O,{setCurrTopic:a,key:e._id+e.topic,chat:e,currTopicId:t.currChat._id})})))}))}var C=a(236);function M(e){var t=e.chat,a=t.userName,n=t.txt;return r.a.createElement("div",{className:"flex coulmn comment-container ".concat(e.userName===a&&e.userName?"rtl my-message":""," ")},r.a.createElement(C.a,{author:r.a.createElement("p",null,a),content:r.a.createElement("p",{className:"".concat(e.userName===a&&e.userName?"rtl my-message":"others-msg"," ")},n)}))}var k,x=a(119),y=a.n(x);var T={setup:function(){k=y()("/")},terminate:function(){k=null},on:function(e,t){if(k)return k.on(e,t)},off:function(e,t){return k?k.off(e,t):void 0},emit:function(e,t){return k?k.emit(e,t):void 0}};function U(e){var t=m().chatList,a=Object(n.useRef)(null);function c(e){return i.apply(this,arguments)}function i(){return(i=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.currChat.getMsg(n);case 2:null===(r=a.current)||void 0===r||r.scrollIntoView({behavior:"smooth"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){return t.currChat.getMsgs(),t.currChat.openSockets(),T.on("chat newMsg",c),function(){t.currChat.closeSockets(),T.off("chat newMsg",void 0)}}),[t.currChat]),Object(f.a)((function(){return r.a.createElement("div",{className:"msg-container"},t.currChat.msgs.map((function(t,a){return r.a.createElement(M,{userName:e.userName,key:a,chat:t})})),r.a.createElement("div",{ref:a}))}))}var q=a(120),z=a.n(q);function S(){var e=m().chatList,t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(""),p=Object(l.a)(s,2),h=p[0],d=p[1];function g(){i(!c)}function v(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.addTopic(a),g();case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){e.currChat.addMsg(t)}return Object(n.useEffect)((function(){e.openSockets()}),[e]),Object(f.a)((function(){var t=e.currChat;return r.a.createElement("div",{className:"app-container flex coulmn justify-center"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex coulmn container topics-container"},r.a.createElement("div",{className:"flex header chat-header-container"},r.a.createElement("h3",null,"Topics")),r.a.createElement("h3",{className:"pointer add-btn",onClick:g},r.a.createElement("img",{src:z.a,alt:"+"})),r.a.createElement(N,{topicAddMode:c,toggleTopicAddMode:g})),c?r.a.createElement("div",{className:"flex coulmn space-between container chat-container"},r.a.createElement("h3",{className:"header"},"Add Topic"),r.a.createElement(j,{topicAddMode:c,sendMsg:v})):t._id?r.a.createElement("div",{className:"flex coulmn container chat-container"},r.a.createElement("div",{className:"flex header chat-header-container"},r.a.createElement(E.a,{src:t.imgUrl}),r.a.createElement("h3",{className:"center-self"}," ",t.topic)),r.a.createElement(U,{userName:h}),r.a.createElement(j,{topicAddMode:c,setUserName:d,userName:h,sendMsg:A})):""))}))}a(217);var L=function(){return r.a.createElement("main",null,r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=a(35),W=a(9),F=a(10),R=(a(100),a(4)),Q=a(121),G=a.n(Q).a.create({withCredentials:!0});function X(){return(X=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.get("/api/chat");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.get("".concat("/api/chat","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.post("/api/chat",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.put("".concat("/api/chat","/").concat(t),a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z,K,P,B,H,J,_,$,ee,te,ae,ne,re={get:function(){return X.apply(this,arguments)},addTopic:function(e){return D.apply(this,arguments)},update:function(e,t){return V.apply(this,arguments)},getById:function(e){return Y.apply(this,arguments)}},ce=(Z=function e(t,a){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),c=arguments.length>3?arguments[3]:void 0;Object(I.a)(this,e),this.topic=void 0,Object(W.a)(this,"msgs",K,this),this._id=void 0,this.imgUrl=void 0,Object(W.a)(this,"addMsg",P,this),this.openSockets=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.emit("join room",{topic:n.topic});case 1:case"end":return e.stop()}}),e)}))),this.closeSockets=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.emit("leave room",{topic:n.topic});case 1:case"end":return e.stop()}}),e)}))),Object(W.a)(this,"getMsg",B,this),Object(W.a)(this,"getMsgs",H,this),this.topic=t,this.msgs=a,this._id=r,this.imgUrl=c},K=Object(F.a)(Z.prototype,"msgs",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(F.a)(Z.prototype,"addMsg",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:re.update(e._id,a),T.emit("chat newMsg",{topic:e.topic,msg:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),B=Object(F.a)(Z.prototype,"getMsg",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.msgs.push(a);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),H=Object(F.a)(Z.prototype,"getMsgs",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.getById(e._id);case 2:if((a=t.sent).msgs){t.next=5;break}return t.abrupt("return");case 5:e.msgs=a.msgs;case 6:case"end":return t.stop()}}),t)}))))}}),Z),ie=(J=R.f.shallow,_=function e(t){var a=this;Object(I.a)(this,e),Object(W.a)(this,"chats",$,this),Object(W.a)(this,"currChat",ee,this),this.rootStore=void 0,Object(W.a)(this,"addTopic",te,this),this.openSockets=function(){T.setup(),T.on("new topic",a.getTopic)},this.getTopic=function(e){a.chats.push(new ce(e.topic,e.msgs,e._id,e.imgUrl))},Object(W.a)(this,"setCurrChat",ae,this),Object(W.a)(this,"getChats",ne,this),this.rootStore=t},$=Object(F.a)(_.prototype,"chats",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=Object(F.a)(_.prototype,"currChat",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ce("",[],0,"")}}),te=Object(F.a)(_.prototype,"addTopic",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new ce(a.txt,[],Date.now(),a.imgUrl),console.log(n),console.log(a),t.next=5,re.addTopic(n);case 5:r=t.sent,T.emit("new topic",r),e.currChat=n;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),ae=Object(F.a)(_.prototype,"setCurrChat",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(u.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.chats.find((function(e){return a===e._id})))&&(e.currChat=n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),ne=Object(F.a)(_.prototype,"getChats",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.get();case 2:t.sent.forEach((function(t){e.chats.push(new ce(t.topic,t.msgs,t._id,t.imgUrl))}));case 4:case"end":return t.stop()}}),t)}))))}}),_),se=function e(){Object(I.a)(this,e),this.chatList=void 0,this.chatList=new ie(this)};new se,i.a.render(r.a.createElement(h,{value:new se},r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[124,1,2]]]);
//# sourceMappingURL=main.1d6f29a9.chunk.js.map